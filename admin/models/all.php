<?phpdefined( '_JEXEC' ) or die( 'Restricted access' );jimport('joomla.application.component.model');class MdagreementModelAll extends JModel{var $data = null;var $_pagination = null;var $_total = null;function buildsearch(){return "SELECT * FROM #__mdagreement order by user_id asc";}function getTotal(){if (!$this->_total){$query = $this->buildSearch();$this->_total = $this->_getListCount($query);}return $this->_total;}function &getPagination(){if(!$this->_pagination){jimport('joomla.html.pagination');$app = &JFactory::getApplication();$this->_pagination = new JPagination($this->getTotal(),JRequest::getVar('limitstart', 0), JRequest::getVar('limit', 20));}return $this->_pagination;}function &getData(){$pagination =& $this->getPagination();if (empty($this->_data)){$query = $this->buildSearch();$this->_data = $this->_getList($query,$pagination->limitstart, $pagination->limit);}return $this->_data;}}